(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[2],{1:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"d",(function(){return u})),t.d(n,"c",(function(){return c})),t.d(n,"a",(function(){return s}));var r=t(2);function o(e){return window.localStorage.setItem(r.a,e.username),window.location.replace("/"),e}function a(e){var n=e.username,t=e.password;return Object(r.b)("/users/login",{body:{username:n,password:t}}).then(o)}function u(e){var n=e.username,t=e.email,a=e.password;return console.log(n,t,a),Object(r.b)("/users/register",{body:{username:n,email:t,password:a}}).then(o)}function c(){window.localStorage.removeItem(r.a),window.location.assign(window.location)}function i(){return window.localStorage.getItem(r.a)}function s(){var e=i();return e?Object(r.b)("/users/".concat(e)).catch((function(e){return c(),null})):Promise.resolve(null)}},14:function(e,n,t){e.exports=t(21)},19:function(e,n,t){},2:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return l}));var r=t(4),o=t.n(r),a=t(3),u=t(13),c=t(6),i=t(1),s="token";function l(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(o.a.mark((function e(n){var t,r,l,f,d,b,m,p,h=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},l=r.body,f=r.file,d=Object(u.a)(r,["body","file"]),b=window.localStorage.getItem(s),m={"Content-Type":"application/json"},b&&(m.Authorization="".concat(b)),p={method:null!==(t=d.method)&&void 0!==t?t:l||f?"POST":"GET",headers:Object(a.a)(Object(a.a)({},m),d.headers)},console.log(p),f&&(p.body=f,delete p.headers["Content-Type"]),l&&(p.body=JSON.stringify(l)),e.next=10,fetch("/api".concat(n),p).then(function(){var e=Object(c.a)(o.a.mark((function e(n){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==n.status){e.next=4;break}return Object(i.c)(),window.location.assign("/login"),e.abrupt("return",Promise.reject({message:"Please re-authenticate."}));case 4:return e.next=6,n.json();case 6:if(t=e.sent,!n.ok){e.next=15;break}if(d.onSuccess&&"function"===typeof d.onSuccess&&d.onSuccess(),!d.redirectTo){e.next=12;break}return window.location.assign(d.redirectTo),e.abrupt("return");case 12:return e.abrupt("return",Promise.resolve(t));case 15:return e.abrupt("return",Promise.reject(t));case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},21:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(10),u=t.n(a),c=(t(19),t(5)),i=r.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(5)]).then(t.bind(null,206))})),s=r.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(6)]).then(t.bind(null,203))}));var l=function(){var e=Object(c.c)();return r.createElement(r.Suspense,{fallback:r.createElement("div",null,"Loading...")},e?r.createElement(i,null):r.createElement(s,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var f=function(e){var n=e.children;return o.a.createElement(c.a,null,n)};u.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f,null,o.a.createElement(l,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return l})),t.d(n,"c",(function(){return f}));var r=t(3),o=t(8),a=t(0),u=t.n(a),c=t(1),i=u.a.createContext({});function s(e){var n=Object(a.useState)({status:"pending",user:null}),t=Object(o.a)(n,2),s=t[0],l=t[1];if(Object(a.useEffect)((function(){c.a().then((function(e){return l({status:"success",user:e})})).catch((function(e){console.error(e),c.c(),l(Object(r.a)(Object(r.a)({},s),{},{status:"success"}))}))}),[]),"pending"===s.status)return"Loading...";return u.a.createElement(i.Provider,Object.assign({value:{data:s,login:function(e){return c.b(e).then((function(e){return l({user:e})}))},logout:function(){c.c(),l({user:null})},register:function(e){return c.d(e).then((function(e){return l({user:e})}))},updateUser:function(e){l({user:e})}}},e))}var l=function(){return u.a.useContext(i)},f=function(){return l().data.user}}},[[14,3,4]]]);
//# sourceMappingURL=main.f9f6b9a6.chunk.js.map